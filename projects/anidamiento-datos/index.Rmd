---
title: "Anidar y desanidar datos con 'nest' y 'unnest'"
author: "Alin Castillo (alincastillo1995@gmail.com)"
output:
  rmdformats::downcute:
    self_contained: true
    thumbnails: true
    lightbox: true
    gallery: false
    highlight: tango
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Descripción
El anidamiento es implícitamente una operación de resumen: obtiene una fila para cada grupo definido por las columnas no anidadas. Esto es útil junto con otros resúmenes que funcionan con conjuntos de datos completos, sobre todo modelos.

## Información Adicional
- [tidyr.tidyverse.org](https://tidyr.tidyverse.org/reference/nest.html)
- [yuzaR Data Science](https://www.youtube.com/watch?v=tQ8dC0oLTnA)

## Instalación del paquete
```{r, eval=FALSE}
install.packages("dplyr")
install.packages("tidyr")
```

## Carga de los paquetes
```{r, warning=FALSE, message=FALSE}
library(dplyr) # for %>% , group_by()
library(tidyr) # for nest()
```

# Creación del marco de datos
```{r}
df <- 
  data.frame(
    individuo = c("i1", "i1", "i2", "i2"),
    gen_a = c(1, 2, 2, 2),
    gen_b = c(3, 3, 1, 3),
    gen_c = c(4, 4, 1, 2))
```

# Agrupamiento por "individuo"
```{r}
df <- 
  df %>% 
  group_by(individuo) %>% 
  nest()

df$data
```

# Desagrupamiento de los datos
```{r}
df <- 
  df %>% 
  unnest(cols = c(data))

df
```

